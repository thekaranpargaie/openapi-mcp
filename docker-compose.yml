version: '3.8'

services:
  test-api:
    build:
      context: ./test_api
    ports:
      - "8002:8002"
    environment:
      - PORT=8002
    networks:
      - mcp-network

  mcp-server:
    build:
      context: .
    ports:
      - "3000:3000"
    environment:
      - PORT=3000
      - TRANSPORT_MODE=http
      - OPENAPI_SPEC_URL=http://test-api:8002/openapi.json
      - API_BASE_URL=http://test-api:8002
      - GROQ_API_KEY=${GROQ_API_KEY}
    depends_on:
      - test-api
    networks:
      - mcp-network

networks:
  mcp-network:
    driver: bridge
